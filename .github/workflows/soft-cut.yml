name: Soft cut release (create release/* branch)

on:
  workflow_dispatch:
    inputs:
      version:
        description: 'Release version (e.g. 2025.01)'
        required: true
        type: string

jobs:
  soft-cut:
    runs-on: ubuntu-latest

    steps:
      # 1️⃣ Checkout pełnej historii
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      # 2️⃣ Upewnij się, że develop jest aktualny
      - name: Checkout develop
        run: |
          git checkout develop
          git pull origin develop

      # 3️⃣ Utwórz branch release/X
      - name: Create release branch
        run: |
          RELEASE_BRANCH="release/${{ github.event.inputs.version }}"
          git checkout -b "$RELEASE_BRANCH"
          git push origin "$RELEASE_BRANCH"
